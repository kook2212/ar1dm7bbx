<!DOCTYPE html><html><head><meta name="x-poe-datastore-behavior" content="local_only"><meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://code.jquery.com https://unpkg.com https://d3js.org https://threejs.org https://cdn.plot.ly https://stackpath.bootstrapcdn.com https://maps.googleapis.com https://cdn.tailwindcss.com https://ajax.googleapis.com https://kit.fontawesome.com https://cdn.datatables.net https://maxcdn.bootstrapcdn.com https://code.highcharts.com https://tako-static-assets-production.s3.amazonaws.com https://www.youtube.com https://fonts.googleapis.com https://fonts.gstatic.com https://pfst.cf2.poecdn.net https://puc.poecdn.net https://i.imgur.com https://wikimedia.org https://*.icons8.com https://*.giphy.com https://picsum.photos https://images.unsplash.com; frame-src 'self' https://www.youtube.com https://trytako.com; child-src 'self'; manifest-src 'self'; worker-src 'self'; upgrade-insecure-requests; block-all-mixed-content;"><meta http-equiv="x-dns-prefetch-control" content="off"><script src="https://puc.poecdn.net/authenticated_preview_page/standard.3ef2c256959faf5a756d.js"></script>
    <meta charset="utf-8">
    <title>Poe</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
  <script src="https://puc.poecdn.net/authenticated_preview_page/disableWebRTC.9710cebe07429a9e8e06.js"></script><meta name="x-poe-allow-downloads" content="true"><meta name="x-poe-datastore-behavior" content="disabled"><script src="https://puc.poecdn.net/authenticated_preview_page/tw.b9024aecac666455e183.js"></script><script src="https://puc.poecdn.net/authenticated_preview_page/deps.faccd16000d314dc16d5.js"></script><script src="https://puc.poecdn.net/authenticated_preview_page/exports.b0f0f482cdeb5302b0b9.js"></script><script src="https://puc.poecdn.net/authenticated_preview_page/renderer.75c73ae6b4235f62945a.js"></script><script>Object.defineProperty(exports, "__esModule", {value: true}); function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }var _react = require('react'); var _react2 = _interopRequireDefault(_react);
var _framermotion = require('framer-motion');
var _lucidereact = require('lucide-react');

// --- éŸ³æ•ˆè¨­å®š ---
const SOUNDS = {
  bgm: "https://cdn.pixabay.com/download/audio/2022/03/15/audio_c8c8a73467.mp3?filename=background-music-simple-piano-melody-15636.mp3",
  correct: "https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3",
  wrong: "https://assets.mixkit.co/active_storage/sfx/2003/2003-preview.mp3",
  click: "https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3",
};

// --- é¡Œåº« ---
const QUESTION_POOL = [
  {
    id: 'w1',
    question: "å†¬å¤©å»å…¬åœ’ç©ï¼Œæ‡‰è©²ç©¿ä»€éº¼è¡£æœæœ€ä¿æš–ï¼Ÿ",
    options: [
      { id: 'A', text: "çŸ­è¢–Tæ¤", icon: "ğŸ‘•", isCorrect: false },
      { id: 'B', text: "ç¾½çµ¨å¤–å¥—", icon: "ğŸ§¥", isCorrect: true },
      { id: 'C', text: "æ³³è¡£", icon: "ğŸ©±", isCorrect: false },
    ]
  },
  {
    id: 'w2',
    question: "å¤å¤©å¤ªé™½å¥½å¤§ï¼Œå‡ºé–€è¦æˆ´ä»€éº¼ä¿è­·é ­éƒ¨ï¼Ÿ",
    options: [
      { id: 'A', text: "æ¯›å¸½", icon: "ğŸ§¶", isCorrect: false },
      { id: 'B', text: "é®é™½å¸½", icon: "ğŸ§¢", isCorrect: true },
      { id: 'C', text: "å®‰å…¨å¸½", icon: "â›‘ï¸", isCorrect: false },
    ]
  },
  {
    id: 'w3',
    question: "ä¸‹é›¨å¤©å‡ºé–€ï¼Œé™¤äº†å¸¶å‚˜é‚„è¦ç©¿ä»€éº¼ï¼Ÿ",
    options: [
      { id: 'A', text: "é›¨é‹", icon: "ğŸ‘¢", isCorrect: true },
      { id: 'B', text: "æ‹–é‹", icon: "ğŸ©´", isCorrect: false },
      { id: 'C', text: "å¸ƒé‹", icon: "ğŸ‘Ÿ", isCorrect: false },
    ]
  },
  {
    id: 'o1',
    question: "ç¡è¦ºçš„æ™‚å€™ï¼Œç©¿ä»€éº¼æœ€èˆ’æœï¼Ÿ",
    options: [
      { id: 'A', text: "ç‰›ä»”è¤²", icon: "ğŸ‘–", isCorrect: false },
      { id: 'B', text: "ç¡è¡£", icon: "ğŸ‘š", isCorrect: true },
      { id: 'C', text: "è¥¿è£", icon: "ğŸ‘”", isCorrect: false },
    ]
  },
  {
    id: 'o2',
    question: "å»åƒåŠ æ­£å¼çš„å©šç¦®ï¼Œç”·ç”Ÿé€šå¸¸æœƒç©¿ä»€éº¼ï¼Ÿ",
    options: [
      { id: 'A', text: "è¥¿è£", icon: "ğŸ‘”", isCorrect: true },
      { id: 'B', text: "ç¡è¡£", icon: "ğŸ‘š", isCorrect: false },
      { id: 'C', text: "æ³³è¤²", icon: "ğŸ©³", isCorrect: false },
    ]
  },
  {
    id: 'j1',
    question: "å»šå¸«ç…®é£¯çš„æ™‚å€™ï¼Œç‚ºäº†ä¹¾æ·¨æœƒç©¿ä»€éº¼ï¼Ÿ",
    options: [
      { id: 'A', text: "åœè£™", icon: "ğŸ½", isCorrect: true },
      { id: 'B', text: "é›¨è¡£", icon: "ğŸ§¥", isCorrect: false },
      { id: 'C', text: "å¤§è¡£", icon: "ğŸ§¥", isCorrect: false },
    ]
  },
  {
    id: 'j2',
    question: "é†«ç”Ÿçœ‹ç—…çš„æ™‚å€™ï¼Œé€šå¸¸ç©¿ä»€éº¼é¡è‰²çš„è¢å­ï¼Ÿ",
    options: [
      { id: 'A', text: "é»‘è‰²", icon: "âš«", isCorrect: false },
      { id: 'B', text: "ç™½è‰²", icon: "âšª", isCorrect: true },
      { id: 'C', text: "ç´…è‰²", icon: "ğŸ”´", isCorrect: false },
    ]
  },
  {
    id: 'h1',
    question: "æ´—å®Œæ¾¡å‡ºä¾†ï¼Œç‚ºäº†æŠŠèº«é«”æ“¦ä¹¾è¦ç”¨ä»€éº¼ï¼Ÿ",
    options: [
      { id: 'A', text: "æµ´å·¾", icon: "ğŸ§–", isCorrect: true },
      { id: 'B', text: "åœå·¾", icon: "ğŸ§£", isCorrect: false },
      { id: 'C', text: "æ¡Œå¸ƒ", icon: "ğŸ§Š", isCorrect: false },
    ]
  },
  {
    id: 'h2',
    question: "åœ¨å®¶è£¡çš„åœ°æ¿èµ°ä¾†èµ°å»ï¼Œç©¿ä»€éº¼æ¯”è¼ƒèˆ’æœï¼Ÿ",
    options: [
      { id: 'A', text: "å®¤å…§æ‹–é‹", icon: "ğŸ©´", isCorrect: true },
      { id: 'B', text: "é›¨é‹", icon: "ğŸ‘¢", isCorrect: false },
      { id: 'C', text: "æºœå†°é‹", icon: "â›¸ï¸", isCorrect: false },
    ]
  },
  {
    id: 'h4',
    question: "ç¾åœ¨å¤–é¢ç—…æ¯’å¾ˆå¤šï¼Œå‡ºé–€è¦æˆ´ä»€éº¼ä¿è­·è‡ªå·±ï¼Ÿ",
    options: [
      { id: 'A', text: "å¢¨é¡", icon: "ğŸ•¶ï¸", isCorrect: false },
      { id: 'B', text: "å£ç½©", icon: "ğŸ˜·", isCorrect: true },
      { id: 'C', text: "è€³æ©Ÿ", icon: "ğŸ§", isCorrect: false },
    ]
  }
];

const QUESTIONS_PER_GAME = 5;

// ç¨ç«‹çš„éŠæˆ²å…§å®¹çµ„ä»¶
const GameContent = ({ question, onAnswer, feedback, speaking, onSpeak }) => {
  // æ³¨æ„ï¼šé€™è£¡å·²ç¶“ç§»é™¤äº† useEffect è‡ªå‹•æœ—è®€çš„ç¨‹å¼ç¢¼
  
  return (
    _react2.default.createElement('div', { className: "flex flex-col h-full max-w-4xl mx-auto w-full"     ,}
      /* Question Card */
      , _react2.default.createElement(_framermotion.motion.div, { 
        key: question.id, // ç¢ºä¿åˆ‡æ›é¡Œç›®æ™‚æœ‰å‹•ç•«
        initial: { opacity: 0, y: 20 },
        animate: { opacity: 1, y: 0 },
        transition: { duration: 0.4 },
        className: "bg-white rounded-3xl shadow-lg p-6 md:p-8 mb-6 relative border-b-8 border-pink-200 flex-grow flex flex-col justify-center items-center text-center mt-4"               ,}

         , _react2.default.createElement('button', { 
           onClick: () => onSpeak(question.question),
           className: `absolute top-4 right-4 p-3 rounded-full transition-all ${speaking ? 'bg-pink-200 text-pink-600 scale-110' : 'bg-gray-100 text-gray-400 hover:bg-pink-100 hover:text-pink-500'}`,
           title: "é»æ“Šæœ—è®€é¡Œç›®",}

           , _react2.default.createElement(_lucidereact.Volume2, { size: 28,} )
         )

        , _react2.default.createElement('h2', { className: "text-2xl md:text-3xl font-bold text-gray-800 leading-relaxed px-8"     ,}
          , question.question
        )
        , _react2.default.createElement('p', { className: "text-sm text-gray-400 mt-2"  ,}, "(é»æ“Šå³ä¸Šè§’å–‡å­è½é¡Œç›®)")
      )

      /* Options Grid */
      , _react2.default.createElement('div', { className: "grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6 mb-4"     ,}
        , question.options.map((option) => (
          _react2.default.createElement(_framermotion.motion.button, {
            key: question.id + option.id, // è¤‡åˆ key ç¢ºä¿é¡Œç›®åˆ‡æ›æ™‚æŒ‰éˆ•ä¹Ÿæœƒé‡ç¹ª
            initial: { opacity: 0, scale: 0.9 },
            animate: { opacity: 1, scale: 1 },
            transition: { duration: 0.3, delay: 0.1 },
            whileHover: { scale: 1.02 },
            whileTap: { scale: 0.98 },
            onClick: () => onAnswer(option.isCorrect),
            disabled: feedback !== null,
            className: `
              relative h-48 md:h-56 rounded-2xl shadow-md flex flex-col items-center justify-center gap-4 transition-all border-4
              ${feedback === null 
                ? 'bg-white border-white hover:border-pink-300 hover:shadow-xl cursor-pointer' 
                : option.isCorrect 
                  ? 'bg-green-50 border-green-400' 
                  : 'bg-gray-50 border-gray-200 opacity-50'
              }
            `,}

            , _react2.default.createElement('span', { className: "text-6xl md:text-7xl filter drop-shadow-sm"   ,}, option.icon)
            , _react2.default.createElement('span', { className: "text-xl md:text-2xl font-bold text-gray-700"   ,}, option.text)

            , feedback === 'correct' && option.isCorrect && (
              _react2.default.createElement('div', { className: "absolute inset-0 bg-green-500/20 rounded-xl flex items-center justify-center animate-in fade-in zoom-in duration-300"          ,}
                , _react2.default.createElement(_lucidereact.CheckCircle, { size: 64, className: "text-green-600 bg-white rounded-full"  ,} )
              )
            )
          )
        ))
      )
    )
  );
};

 function LiDongClothingGame() {
  const [gameState, setGameState] = _react.useState.call(void 0, 'start'); // start, playing, result
  const [activeQuestions, setActiveQuestions] = _react.useState.call(void 0, []); 
  const [currentQuestionIndex, setCurrentQuestionIndex] = _react.useState.call(void 0, 0);
  const [score, setScore] = _react.useState.call(void 0, 0);
  const [feedback, setFeedback] = _react.useState.call(void 0, null);
  const [isMuted, setIsMuted] = _react.useState.call(void 0, false);
  const [speaking, setSpeaking] = _react.useState.call(void 0, false);

  // Audio Refs
  const bgmRef = _react.useRef.call(void 0, null);
  const correctSfxRef = _react.useRef.call(void 0, null);
  const wrongSfxRef = _react.useRef.call(void 0, null);
  const clickSfxRef = _react.useRef.call(void 0, null);

  // åˆå§‹åŒ–éŸ³æ•ˆ
  _react.useEffect.call(void 0, () => {
    bgmRef.current = new Audio(SOUNDS.bgm);
    bgmRef.current.loop = true;
    bgmRef.current.volume = 0.3;

    correctSfxRef.current = new Audio(SOUNDS.correct);
    wrongSfxRef.current = new Audio(SOUNDS.wrong);
    clickSfxRef.current = new Audio(SOUNDS.click);
    clickSfxRef.current.volume = 0.5;

    return () => {
      if (bgmRef.current) {
        bgmRef.current.pause();
        bgmRef.current = null;
      }
      window.speechSynthesis.cancel();
    };
  }, []);

  // æ§åˆ¶èƒŒæ™¯éŸ³æ¨‚éœéŸ³
  _react.useEffect.call(void 0, () => {
    if (bgmRef.current) {
      bgmRef.current.muted = isMuted;
    }
  }, [isMuted]);

  // æœ—è®€åŠŸèƒ½
  const speakText = _react.useCallback.call(void 0, (text) => {
    if (isMuted) return;
    
    // ç¢ºä¿ä¹‹å‰çš„èªéŸ³åœæ­¢
    window.speechSynthesis.cancel();

    const utterance = new SpeechSynthesisUtterance(text);
    utterance.lang = 'zh-HK'; // å»£æ±è©±
    utterance.rate = 0.9; 
    utterance.pitch = 1.1;

    utterance.onstart = () => setSpeaking(true);
    utterance.onend = () => setSpeaking(false);
    utterance.onerror = () => setSpeaking(false);

    window.speechSynthesis.speak(utterance);
  }, [isMuted]);

  const stopSpeaking = () => {
    window.speechSynthesis.cancel();
    setSpeaking(false);
  };

  const playSound = (type) => {
    if (isMuted) return;
    const playAudio = (ref) => {
        if (ref.current) {
            ref.current.currentTime = 0;
            ref.current.play().catch(e => console.log("Audio play failed", e));
        }
    };

    switch (type) {
      case 'click': playAudio(clickSfxRef); break;
      case 'correct': playAudio(correctSfxRef); break;
      case 'wrong': playAudio(wrongSfxRef); break;
      default: break;
    }
  };

  const shuffleQuestions = () => {
    const shuffled = [...QUESTION_POOL].sort(() => 0.5 - Math.random());
    return shuffled.slice(0, QUESTIONS_PER_GAME);
  };

  const startGame = () => {
    playSound('click');
    stopSpeaking();
    
    const selectedQuestions = shuffleQuestions();
    setActiveQuestions(selectedQuestions);
    setCurrentQuestionIndex(0);
    setScore(0);
    setFeedback(null);
    setGameState('playing');
    
    if (bgmRef.current && !isMuted) {
      bgmRef.current.play().catch(() => {});
    }
  };

  const handleAnswer = (isCorrect) => {
    if (feedback !== null) return; // Prevent double clicks

    stopSpeaking(); // åœæ­¢æœ—è®€

    if (isCorrect) {
      playSound('correct');
      setFeedback('correct');
      setScore(prev => prev + 1);
    } else {
      playSound('wrong');
      setFeedback('wrong');
    }

    // å»¶é²é€²å…¥ä¸‹ä¸€é¡Œ
    setTimeout(() => {
      setFeedback(null);
      if (currentQuestionIndex < activeQuestions.length - 1) {
        setCurrentQuestionIndex(prev => prev + 1);
      } else {
        setGameState('result');
      }
    }, 1500);
  };

  const restartGame = () => {
    stopSpeaking();
    setGameState('start');
  };

  return (
    _react2.default.createElement('div', { className: "min-h-screen bg-gradient-to-br from-blue-100 to-pink-100 font-sans text-gray-800 flex flex-col"       ,}
      /* Header */
      , _react2.default.createElement('header', { className: "bg-white/80 backdrop-blur-md shadow-sm p-4 sticky top-0 z-10"      ,}
        , _react2.default.createElement('div', { className: "max-w-6xl mx-auto flex justify-between items-center"    ,}
          , _react2.default.createElement('div', { className: "flex items-center gap-3"  ,}
            , _react2.default.createElement('div', { className: "bg-pink-500 p-2 rounded-xl text-white"   ,}
              , _react2.default.createElement(_lucidereact.Shirt, { size: 24,} )
            )
            , _react2.default.createElement('h1', { className: "text-xl md:text-2xl font-bold text-pink-600 tracking-wide"    ,}, "ç”Ÿæ´»è‡ªç†å°é”äºº"

            )
          )

          , _react2.default.createElement('button', {
            onClick: () => setIsMuted(!isMuted),
            className: `p-3 rounded-full transition-colors ${isMuted ? 'bg-gray-200 text-gray-500' : 'bg-pink-100 text-pink-600'}`,}

            , isMuted ? _react2.default.createElement(_lucidereact.VolumeX, { size: 24,} ) : _react2.default.createElement(_lucidereact.Music, { size: 24,} )
          )
        )
      )

      /* Main Content */
      , _react2.default.createElement('main', { className: "flex-grow flex flex-col items-center justify-center p-4 md:p-6 w-full"       ,}
        , _react2.default.createElement(_framermotion.AnimatePresence, { mode: "wait",}

          /* START SCREEN */
          , gameState === 'start' && (
            _react2.default.createElement(_framermotion.motion.div, { 
              key: "start",
              initial: { opacity: 0, scale: 0.9 },
              animate: { opacity: 1, scale: 1 },
              exit: { opacity: 0, y: -20 },
              className: "text-center max-w-lg w-full bg-white/60 backdrop-blur-sm p-8 rounded-3xl shadow-xl border-4 border-white"         ,}

              , _react2.default.createElement('div', { className: "mb-8 relative inline-block"  ,}
                , _react2.default.createElement('div', { className: "absolute inset-0 bg-pink-200 rounded-full blur-xl opacity-50 animate-pulse"      ,})
                , _react2.default.createElement(_lucidereact.Shirt, { size: 100, className: "text-pink-500 relative z-10"  ,} )
              )
              , _react2.default.createElement('h2', { className: "text-3xl md:text-4xl font-bold text-gray-800 mb-4"    ,}, "é¸è¡£æœæŒ‘æˆ°"

              )
              , _react2.default.createElement('p', { className: "text-lg text-gray-600 mb-8 leading-relaxed"   ,}, "çœ‹çœ‹ä¸åŒçš„å ´åˆå’Œå¤©æ°£ï¼Œ"
                , _react2.default.createElement('br', null), "ä½ èƒ½é¸å‡ºæœ€åˆé©çš„è¡£æœå—ï¼Ÿ"

              )
              , _react2.default.createElement('button', {
                onClick: startGame,
                className: "w-full bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white text-xl font-bold py-4 px-8 rounded-2xl shadow-lg transform transition hover:scale-105 active:scale-95 flex items-center justify-center gap-3"                    ,}

                , _react2.default.createElement(_lucidereact.Play, { size: 28, fill: "currentColor",} ), "é–‹å§‹éŠæˆ²"

              )
            )
          )

          /* PLAYING SCREEN */
          , gameState === 'playing' && activeQuestions.length > 0 && (
            _react2.default.createElement('div', { className: "w-full flex flex-col h-full"   ,}
              /* Progress Bar */
              , _react2.default.createElement('div', { className: "w-full max-w-2xl mx-auto mb-4 flex items-center gap-4"      ,}
                , _react2.default.createElement('span', { className: "font-bold text-pink-600 text-lg"  ,}
                  , currentQuestionIndex + 1, " / "  , QUESTIONS_PER_GAME
                )
                , _react2.default.createElement('div', { className: "flex-grow h-4 bg-gray-200 rounded-full overflow-hidden shadow-inner"     ,}
                  , _react2.default.createElement(_framermotion.motion.div, { 
                    className: "h-full bg-pink-500 rounded-full"  ,
                    initial: { width: 0 },
                    animate: { width: `${((currentQuestionIndex + 1) / QUESTIONS_PER_GAME) * 100}%` },
                    transition: { duration: 0.5 },}
                  )
                )
              )

              , _react2.default.createElement(GameContent, { 
                question: activeQuestions[currentQuestionIndex],
                onAnswer: handleAnswer,
                feedback: feedback,
                speaking: speaking,
                onSpeak: speakText,}
              )
            )
          )

          /* RESULT SCREEN */
          , gameState === 'result' && (
            _react2.default.createElement(_framermotion.motion.div, { 
              key: "result",
              initial: { opacity: 0, scale: 0.9 },
              animate: { opacity: 1, scale: 1 },
              className: "text-center max-w-lg w-full bg-white p-8 rounded-3xl shadow-2xl border-t-8 border-pink-400"        ,}

              , _react2.default.createElement('h2', { className: "text-3xl font-bold text-gray-800 mb-6"   ,}, "éŠæˆ²çµæŸï¼")

              , _react2.default.createElement('div', { className: "flex justify-center items-center gap-2 mb-8"    ,}
                , _react2.default.createElement('div', { className: "text-6xl font-black text-pink-500"  ,}
                  , score
                )
                , _react2.default.createElement('div', { className: "text-2xl text-gray-400 font-bold self-end mb-2"    ,}, "/ "
                   , QUESTIONS_PER_GAME, " åˆ†"
                )
              )

              , _react2.default.createElement('div', { className: "mb-8",}
                , score === QUESTIONS_PER_GAME ? (
                  _react2.default.createElement('div', { className: "bg-yellow-100 text-yellow-800 p-4 rounded-xl font-bold text-lg flex items-center justify-center gap-2"         ,}, "ğŸ† å¤ªå²å®³äº†ï¼ä½ æ˜¯ç©¿æ­å¤§å¸«ï¼"

                  )
                ) : score >= QUESTIONS_PER_GAME / 2 ? (
                  _react2.default.createElement('div', { className: "bg-blue-100 text-blue-800 p-4 rounded-xl font-bold text-lg"     ,}, "ğŸ‘ å¾ˆæ£’å–”ï¼ç¹¼çºŒåŠ æ²¹ï¼"

                  )
                ) : (
                  _react2.default.createElement('div', { className: "bg-gray-100 text-gray-600 p-4 rounded-xl font-bold text-lg"     ,}, "ğŸ’ª æ²’é—œä¿‚ï¼Œå†è©¦ä¸€æ¬¡æœƒæ›´å¥½ï¼"

                  )
                )
              )

              , _react2.default.createElement('div', { className: "flex gap-4" ,}
                , _react2.default.createElement('button', {
                  onClick: restartGame,
                  className: "flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 font-bold py-3 px-6 rounded-xl transition-colors"        ,}
, "å›é¦–é "

                )
                , _react2.default.createElement('button', {
                  onClick: startGame,
                  className: "flex-1 bg-pink-500 hover:bg-pink-600 text-white font-bold py-3 px-6 rounded-xl shadow-md transition-transform active:scale-95 flex items-center justify-center gap-2"              ,}

                  , _react2.default.createElement(_lucidereact.Shuffle, { size: 20,} ), "å†ç©ä¸€æ¬¡"

                )
              )
            )
          )

        )
      )
    )
  );
} exports.default = LiDongClothingGame;
</script></head>
  <body>
  

<div id="preview-app"></div></body></html>